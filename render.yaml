services:
  - type: web
    name: ambitionly-backend
    env: node
    plan: free
    buildCommand: npm install && npx prisma generate && npx prisma migrate deploy || npx prisma db push
    startCommand: npx tsx --tsconfig backend/tsconfig.json server.ts
    # Sensitive environment variables should be set in Render Dashboard
    # Go to: Dashboard > Your Service > Environment > Add Environment Variable
    # Required variables:
    # - DATABASE_URL (PostgreSQL connection string)
    # - SUPABASE_SERVICE_ROLE_KEY (Supabase Service Role JWT - KEEP SECRET!)
    # - EXPO_PUBLIC_SUPABASE_ANON_KEY (Supabase Anon Key JWT - KEEP SECRET!)
    # - EXPO_PUBLIC_SUPABASE_URL (Supabase project URL)
    envVars:
      - key: API_URL
        value: https://ambitionly.onrender.com
      - key: PORT
        value: 3000
      - key: NODE_ENV
        value: production

