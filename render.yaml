services:
  - type: web
    name: ambitionly-backend
    env: node
    plan: free
    buildCommand: npm install && npx prisma generate && npx prisma migrate deploy || npx prisma db push
    startCommand: npx tsx --tsconfig backend/tsconfig.json server.ts
    # Environment variables should be set in Render Dashboard, not here
    # Go to: Render Dashboard > Your Service > Environment > Add Environment Variable
    # Required environment variables:
    # - DATABASE_URL (PostgreSQL connection string)
    # - SUPABASE_SERVICE_ROLE_KEY (Supabase service role JWT - KEEP SECRET!)
    # - API_URL (e.g., https://ambitionly.onrender.com)
    # - EXPO_PUBLIC_SUPABASE_URL (Supabase project URL)
    # - EXPO_PUBLIC_SUPABASE_ANON_KEY (Supabase anon key - public but set via env)
    # - PORT (default: 3000)
    # - NODE_ENV (production)
    envVars:
      - key: API_URL
        value: https://ambitionly.onrender.com
      - key: PORT
        value: 3000
      - key: NODE_ENV
        value: production

